var _0x13e982=_0x106a;(function(_0x5cbf33,_0x59e0b6){var _0x204cbf=_0x106a,_0x3b35cd=_0x5cbf33();while(!![]){try{var _0x309ee2=parseInt(_0x204cbf(0x1da))/0x1+-parseInt(_0x204cbf(0x1df))/0x2*(parseInt(_0x204cbf(0x1e5))/0x3)+-parseInt(_0x204cbf(0x20a))/0x4*(-parseInt(_0x204cbf(0x203))/0x5)+-parseInt(_0x204cbf(0x1f7))/0x6+-parseInt(_0x204cbf(0x1de))/0x7+-parseInt(_0x204cbf(0x1d9))/0x8*(parseInt(_0x204cbf(0x209))/0x9)+parseInt(_0x204cbf(0x206))/0xa*(parseInt(_0x204cbf(0x1d5))/0xb);if(_0x309ee2===_0x59e0b6)break;else _0x3b35cd['push'](_0x3b35cd['shift']());}catch(_0x896447){_0x3b35cd['push'](_0x3b35cd['shift']());}}}(_0x2cbd,0x2ab8d));var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':_0x13e982(0x1db),'scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'scriptOrder':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'autoReadSubfolders':!![],'lastSaved':null},'init':function(_0x5b8ddd){var _0x24a646=_0x13e982,_0x46210e=this;if(_0x46210e[_0x24a646(0x1d8)]){if(_0x5b8ddd)_0x5b8ddd(null,!![]);return;}csInterface[_0x24a646(0x1ef)](_0x24a646(0x1d7),function(_0x235a62){var _0x52c9ec=_0x24a646;if(_0x235a62&&_0x235a62!==_0x52c9ec(0x1e6)){_0x46210e[_0x52c9ec(0x205)]=_0x235a62+_0x52c9ec(0x1f5),_0x46210e[_0x52c9ec(0x1d8)]=!![];if(_0x5b8ddd)_0x5b8ddd(null,!![]);}else{if(_0x5b8ddd)_0x5b8ddd(_0x52c9ec(0x1fe));}});},'loadData':function(_0x5c1a02){var _0x3d6e83=_0x13e982,_0x467514=this;if(!_0x467514[_0x3d6e83(0x1d8)]||!_0x467514['dataFilePath']){if(_0x5c1a02)_0x5c1a02('数据管理器未初始化');return;}csInterface['evalScript'](_0x3d6e83(0x1fb)+_0x467514[_0x3d6e83(0x205)]+'\x22)',function(_0x2365e1){var _0x56d04e=_0x3d6e83;try{if(_0x2365e1&&_0x2365e1!==_0x56d04e(0x1e6)&&_0x2365e1!==_0x56d04e(0x1f1)&&_0x2365e1!=='{}'){var _0x931970=JSON['parse'](_0x2365e1);!_0x931970['version']&&(_0x931970=_0x467514[_0x56d04e(0x1ed)](_0x931970));_0x931970=_0x467514['mergeWithDefaults'](_0x931970);if(_0x5c1a02)_0x5c1a02(null,_0x931970);}else{if(_0x5c1a02)_0x5c1a02(null,JSON['parse'](JSON[_0x56d04e(0x1d4)](_0x467514[_0x56d04e(0x1ec)])));}}catch(_0x5b9423){console['error'](_0x56d04e(0x1dd),_0x5b9423);if(_0x5c1a02)_0x5c1a02(null,JSON['parse'](JSON[_0x56d04e(0x1d4)](_0x467514[_0x56d04e(0x1ec)])));}});},'saveData':function(_0x2d6d8d,_0x5bf198){var _0x489dba=_0x13e982,_0x7ec5af=this;if(!_0x7ec5af[_0x489dba(0x1d8)]||!_0x7ec5af[_0x489dba(0x205)]){if(_0x5bf198)_0x5bf198(_0x489dba(0x1ea));return;}try{_0x2d6d8d[_0x489dba(0x1fc)]=new Date()[_0x489dba(0x1f0)]();if(!_0x7ec5af[_0x489dba(0x1e3)](_0x2d6d8d)){if(_0x5bf198)_0x5bf198(_0x489dba(0x1fa));return;}var _0x38bbca=JSON['stringify'](_0x2d6d8d,null,0x2),_0xca4dd5=encodeURIComponent(_0x38bbca);csInterface[_0x489dba(0x1ef)](_0x489dba(0x1f3)+_0x7ec5af['dataFilePath']+_0x489dba(0x1e1)+_0xca4dd5+'\x22)',function(_0x39e17e){var _0x217fe7=_0x489dba;if(_0x39e17e==='success'){if(_0x5bf198)_0x5bf198(null,!![]);}else{if(_0x5bf198)_0x5bf198(_0x217fe7(0x1e7)+_0x39e17e);}});}catch(_0x4b4e06){if(_0x5bf198)_0x5bf198(_0x489dba(0x208)+_0x4b4e06[_0x489dba(0x1f4)]());}},'validateData':function(_0x383a23){var _0x1cf795=_0x13e982;if(!_0x383a23||typeof _0x383a23!=='object')return![];if(!_0x383a23[_0x1cf795(0x1dc)]||!Array[_0x1cf795(0x1e8)](_0x383a23[_0x1cf795(0x1dc)]))return![];if(!_0x383a23[_0x1cf795(0x1e9)]||!Array['isArray'](_0x383a23['allTags']))return![];if(!_0x383a23[_0x1cf795(0x1ff)]||typeof _0x383a23[_0x1cf795(0x1ff)]!=='object')return![];return!![];},'mergeWithDefaults':function(_0x24d549){var _0xee01a2=_0x13e982,_0x1ca9f6=JSON['parse'](JSON[_0xee01a2(0x1d4)](this[_0xee01a2(0x1ec)]));function _0x10dc36(_0x2a930d,_0x2551c1){var _0xca88bb=_0xee01a2;for(var _0x3f2eb4 in _0x2551c1){_0x2551c1[_0xca88bb(0x1eb)](_0x3f2eb4)&&(typeof _0x2551c1[_0x3f2eb4]==='object'&&_0x2551c1[_0x3f2eb4]!==null&&!Array[_0xca88bb(0x1e8)](_0x2551c1[_0x3f2eb4])?((!_0x2a930d[_0x3f2eb4]||typeof _0x2a930d[_0x3f2eb4]!==_0xca88bb(0x1d3))&&(_0x2a930d[_0x3f2eb4]={}),_0x10dc36(_0x2a930d[_0x3f2eb4],_0x2551c1[_0x3f2eb4])):_0x2a930d[_0x3f2eb4]=_0x2551c1[_0x3f2eb4]);}}return _0x10dc36(_0x1ca9f6,_0x24d549),_0x1ca9f6;},'migrateOldData':function(_0x40cdd7){var _0x108a1a=_0x13e982,_0x1f5b82=JSON[_0x108a1a(0x1e2)](JSON[_0x108a1a(0x1d4)](this[_0x108a1a(0x1ec)]));if(_0x40cdd7['scriptsFolderPath'])_0x1f5b82[_0x108a1a(0x202)]=_0x40cdd7[_0x108a1a(0x202)];if(_0x40cdd7[_0x108a1a(0x1ff)])_0x1f5b82[_0x108a1a(0x1ff)]=_0x40cdd7['scriptSettings'];if(_0x40cdd7['categories'])_0x1f5b82[_0x108a1a(0x1dc)]=_0x40cdd7[_0x108a1a(0x1dc)];if(_0x40cdd7[_0x108a1a(0x1e9)])_0x1f5b82['allTags']=_0x40cdd7[_0x108a1a(0x1e9)];return _0x1f5b82;},'createBackup':function(){var _0x2e6391=this;return new Promise(function(_0x4043f3,_0x4c3d01){var _0x164364=_0x106a,_0x521bfe=_0x2e6391[_0x164364(0x205)][_0x164364(0x1ee)](_0x164364(0x1d2),'_backup_'+Date[_0x164364(0x1d6)]()+_0x164364(0x1d2));csInterface['evalScript'](_0x164364(0x1f2)+_0x2e6391[_0x164364(0x205)]+_0x164364(0x1e1)+_0x521bfe+'\x22)',function(_0x55dac8){var _0x56ddbf=_0x164364;_0x55dac8==='success'?_0x4043f3(_0x521bfe):_0x4c3d01(_0x56ddbf(0x1fd)+_0x55dac8);});});},'exportData':function(){var _0x86bc8e=this;return new Promise(function(_0x317183,_0x410060){var _0x5e407b=_0x106a;_0x86bc8e[_0x5e407b(0x201)]()[_0x5e407b(0x204)](function(_0x461bc4){var _0x46a68d=_0x5e407b,_0x3ebd5b=JSON[_0x46a68d(0x1e2)](JSON[_0x46a68d(0x1d4)](_0x461bc4));delete _0x3ebd5b['scriptsFolderPath'],_0x317183(_0x3ebd5b);})['catch'](_0x410060);});},'importData':function(_0x6b557e){var _0x24a323=this;return new Promise(function(_0x58f1ff,_0x549c92){var _0x1fcea9=_0x106a;try{if(!_0x24a323[_0x1fcea9(0x1e3)](_0x6b557e)){_0x549c92(_0x1fcea9(0x1f9));return;}_0x24a323[_0x1fcea9(0x1f8)]()[_0x1fcea9(0x204)](function(){var _0x3737c1=_0x1fcea9;return _0x24a323[_0x3737c1(0x201)]();})[_0x1fcea9(0x204)](function(_0x4e43a4){var _0x49b3f4=_0x1fcea9,_0x3cfc15=_0x24a323[_0x49b3f4(0x207)](_0x6b557e);return _0x3cfc15['scriptsFolderPath']=_0x4e43a4['scriptsFolderPath'],_0x24a323[_0x49b3f4(0x1e4)](_0x3cfc15);})['then'](function(){_0x58f1ff(!![]);})[_0x1fcea9(0x1f6)](_0x549c92);}catch(_0x353a7f){_0x549c92(_0x1fcea9(0x200)+_0x353a7f[_0x1fcea9(0x1f4)]());}});}};function _0x2cbd(){var _0x497711=['getExtensionDataPath()','initialized','8sZCYci','147139gVFElX','1.0','categories','加载数据失败:','1749454sEBgpJ','258zdCjWv','exports','\x22,\x20\x22','parse','validateData','saveData','7941WfwLLn','null','保存失败:\x20','isArray','allTags','数据管理器未初始化','hasOwnProperty','defaultData','migrateOldData','replace','evalScript','toISOString','undefined','createDataBackup(\x22','saveDataToFile(\x22','toString','/moguBar_data.json','catch','1415544bEvajG','createBackup','导入数据格式无效','数据验证失败','loadDataFromFile(\x22','lastSaved','备份失败:\x20','无法获取扩展数据路径','scriptSettings','导入失败:\x20','loadData','scriptsFolderPath','12805DAJIjn','then','dataFilePath','3859890sUbBtJ','mergeWithDefaults','数据序列化失败:\x20','242478xrSMzm','172DKfmXV','.json','object','stringify','22jtrLbo','now'];_0x2cbd=function(){return _0x497711;};return _0x2cbd();}function _0x106a(_0x4ba33a,_0x3a3fb6){var _0x2cbd0b=_0x2cbd();return _0x106a=function(_0x106a1e,_0x2836ef){_0x106a1e=_0x106a1e-0x1d2;var _0x24be28=_0x2cbd0b[_0x106a1e];return _0x24be28;},_0x106a(_0x4ba33a,_0x3a3fb6);}typeof module!==_0x13e982(0x1f1)&&module['exports']&&(module[_0x13e982(0x1e0)]=DataManager);
