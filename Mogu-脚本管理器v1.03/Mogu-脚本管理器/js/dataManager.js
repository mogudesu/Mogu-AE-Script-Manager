var _0x4237ad=_0x5bc6;(function(_0x3d0db4,_0x4b89f9){var _0x533c5c=_0x5bc6,_0x3c7c5b=_0x3d0db4();while(!![]){try{var _0x59ee4e=parseInt(_0x533c5c(0x14c))/0x1*(-parseInt(_0x533c5c(0x159))/0x2)+-parseInt(_0x533c5c(0x168))/0x3*(-parseInt(_0x533c5c(0x16d))/0x4)+parseInt(_0x533c5c(0x186))/0x5*(-parseInt(_0x533c5c(0x16f))/0x6)+-parseInt(_0x533c5c(0x187))/0x7+-parseInt(_0x533c5c(0x174))/0x8*(parseInt(_0x533c5c(0x158))/0x9)+-parseInt(_0x533c5c(0x155))/0xa+parseInt(_0x533c5c(0x15c))/0xb;if(_0x59ee4e===_0x4b89f9)break;else _0x3c7c5b['push'](_0x3c7c5b['shift']());}catch(_0x407240){_0x3c7c5b['push'](_0x3c7c5b['shift']());}}}(_0x3351,0x8bf49));var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':'1.0','scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'scriptOrder':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'autoReadSubfolders':!![],'lastSaved':null},'init':function(_0x5c15aa){var _0x50d761=_0x5bc6,_0xbc06b7=this;if(_0xbc06b7[_0x50d761(0x15e)]){if(_0x5c15aa)_0x5c15aa(null,!![]);return;}csInterface['evalScript'](_0x50d761(0x157),function(_0x2cd878){var _0x5b9308=_0x50d761;if(_0x2cd878&&_0x2cd878!=='null'){_0xbc06b7[_0x5b9308(0x17c)]=_0x2cd878+'/moguBar_data.json',_0xbc06b7[_0x5b9308(0x15e)]=!![];if(_0x5c15aa)_0x5c15aa(null,!![]);}else{if(_0x5c15aa)_0x5c15aa(_0x5b9308(0x151));}});},'loadData':function(_0x2bd05d){var _0x79f05e=_0x5bc6,_0x537730=this;if(!_0x537730[_0x79f05e(0x15e)]||!_0x537730[_0x79f05e(0x17c)]){if(_0x2bd05d)_0x2bd05d(_0x79f05e(0x14f));return;}csInterface[_0x79f05e(0x14b)](_0x79f05e(0x177)+_0x537730[_0x79f05e(0x17c)]+'\x22)',function(_0x6061b3){var _0x48261d=_0x79f05e;try{if(_0x6061b3&&_0x6061b3!=='null'&&_0x6061b3!==_0x48261d(0x176)&&_0x6061b3!=='{}'){var _0x36051e=JSON[_0x48261d(0x183)](_0x6061b3);!_0x36051e[_0x48261d(0x167)]&&(_0x36051e=_0x537730[_0x48261d(0x17d)](_0x36051e));_0x36051e=_0x537730['mergeWithDefaults'](_0x36051e);if(_0x2bd05d)_0x2bd05d(null,_0x36051e);}else{if(_0x2bd05d)_0x2bd05d(null,JSON[_0x48261d(0x183)](JSON[_0x48261d(0x172)](_0x537730[_0x48261d(0x18a)])));}}catch(_0x58eb1d){console[_0x48261d(0x181)](_0x48261d(0x165),_0x58eb1d);if(_0x2bd05d)_0x2bd05d(null,JSON[_0x48261d(0x183)](JSON[_0x48261d(0x172)](_0x537730[_0x48261d(0x18a)])));}});},'saveData':function(_0x218158,_0x4215a6){var _0x447d45=_0x5bc6,_0x32292f=this;if(!_0x32292f[_0x447d45(0x15e)]||!_0x32292f['dataFilePath']){if(_0x4215a6)_0x4215a6(_0x447d45(0x14f));return;}try{_0x218158[_0x447d45(0x166)]=new Date()[_0x447d45(0x148)]();if(!_0x32292f[_0x447d45(0x170)](_0x218158)){if(_0x4215a6)_0x4215a6('数据验证失败');return;}var _0x477978=JSON[_0x447d45(0x172)](_0x218158,null,0x2),_0xeabed6=encodeURIComponent(_0x477978);csInterface[_0x447d45(0x14b)](_0x447d45(0x184)+_0x32292f['dataFilePath']+_0x447d45(0x169)+_0xeabed6+'\x22)',function(_0x57d47d){var _0x2368f8=_0x447d45;if(_0x57d47d===_0x2368f8(0x18b)){if(_0x4215a6)_0x4215a6(null,!![]);}else{if(_0x4215a6)_0x4215a6('保存失败:\x20'+_0x57d47d);}});}catch(_0x32830d){if(_0x4215a6)_0x4215a6(_0x447d45(0x152)+_0x32830d[_0x447d45(0x178)]());}},'loadDataByType':function(_0x5b9df3,_0x40f9a4){var _0x4aaef9=_0x5bc6,_0x55f055=this;console[_0x4aaef9(0x156)]('DataManager检测步骤1:\x20调用loadDataByType方法，数据类型:',_0x5b9df3);if(!_0x55f055[_0x4aaef9(0x15e)]||!_0x55f055['dataFilePath']){console['log'](_0x4aaef9(0x150));if(_0x40f9a4)_0x40f9a4('数据管理器未初始化');return;}_0x55f055[_0x4aaef9(0x17e)](function(_0x2435c3,_0xf04712){var _0x129161=_0x4aaef9;if(_0x2435c3){console[_0x129161(0x156)](_0x129161(0x171),_0x2435c3);if(_0x40f9a4)_0x40f9a4(_0x2435c3);return;}var _0x4e488b;switch(_0x5b9df3){case'main':_0x4e488b={'version':_0xf04712['version'],'scriptsFolderPath':_0xf04712['scriptsFolderPath'],'categories':_0xf04712[_0x129161(0x14a)],'allTags':_0xf04712[_0x129161(0x16c)],'layoutSettings':_0xf04712[_0x129161(0x182)],'backgroundSettings':_0xf04712[_0x129161(0x164)],'autoReadSubfolders':_0xf04712[_0x129161(0x188)],'lastSaved':_0xf04712['lastSaved']};break;case _0x129161(0x160):_0x4e488b=_0xf04712[_0x129161(0x15a)]||{};break;case _0x129161(0x17f):_0x4e488b=_0xf04712['scriptOrder']||[];break;default:console[_0x129161(0x156)](_0x129161(0x17b),_0x5b9df3);if(_0x40f9a4)_0x40f9a4(_0x129161(0x173)+_0x5b9df3);return;}console[_0x129161(0x156)]('DataManager检测步骤1:\x20成功加载数据类型',_0x5b9df3,_0x129161(0x17a),_0x4e488b);if(_0x40f9a4)_0x40f9a4(null,_0x4e488b);});},'saveDataByType':function(_0x324b5f,_0x512934,_0x32f15c){var _0x1403d1=_0x5bc6,_0x248da0=this;console[_0x1403d1(0x156)](_0x1403d1(0x153),_0x324b5f);if(!_0x248da0[_0x1403d1(0x15e)]||!_0x248da0[_0x1403d1(0x17c)]){console['log'](_0x1403d1(0x180));if(_0x32f15c)_0x32f15c(_0x1403d1(0x14f));return;}_0x248da0['loadData'](function(_0x5416c1,_0x447bcf){var _0x13f071=_0x1403d1;if(_0x5416c1){console[_0x13f071(0x156)]('DataManager检测步骤2:\x20加载完整数据失败:',_0x5416c1);if(_0x32f15c)_0x32f15c(_0x5416c1);return;}switch(_0x324b5f){case'main':if(_0x512934[_0x13f071(0x167)]!==undefined)_0x447bcf[_0x13f071(0x167)]=_0x512934[_0x13f071(0x167)];if(_0x512934[_0x13f071(0x149)]!==undefined)_0x447bcf['scriptsFolderPath']=_0x512934[_0x13f071(0x149)];if(_0x512934[_0x13f071(0x14a)]!==undefined)_0x447bcf[_0x13f071(0x14a)]=_0x512934[_0x13f071(0x14a)];if(_0x512934[_0x13f071(0x16c)]!==undefined)_0x447bcf[_0x13f071(0x16c)]=_0x512934[_0x13f071(0x16c)];if(_0x512934[_0x13f071(0x182)]!==undefined)_0x447bcf[_0x13f071(0x182)]=_0x512934['layoutSettings'];if(_0x512934[_0x13f071(0x164)]!==undefined)_0x447bcf[_0x13f071(0x164)]=_0x512934[_0x13f071(0x164)];if(_0x512934[_0x13f071(0x188)]!==undefined)_0x447bcf[_0x13f071(0x188)]=_0x512934[_0x13f071(0x188)];break;case _0x13f071(0x160):_0x447bcf[_0x13f071(0x15a)]=_0x512934;break;case'order':_0x447bcf[_0x13f071(0x189)]=_0x512934;break;default:console['log'](_0x13f071(0x16a),_0x324b5f);if(_0x32f15c)_0x32f15c(_0x13f071(0x173)+_0x324b5f);return;}_0x248da0[_0x13f071(0x163)](_0x447bcf,function(_0x97140e){var _0x30f97a=_0x13f071;if(_0x97140e){console['log']('DataManager检测步骤2:\x20保存数据失败:',_0x97140e);if(_0x32f15c)_0x32f15c(_0x97140e);}else{console['log'](_0x30f97a(0x161),_0x324b5f);if(_0x32f15c)_0x32f15c(null,!![]);}});});},'validateData':function(_0x1bfb7a){var _0x1f73a3=_0x5bc6;if(!_0x1bfb7a||typeof _0x1bfb7a!==_0x1f73a3(0x154))return![];if(!_0x1bfb7a['categories']||!Array[_0x1f73a3(0x14e)](_0x1bfb7a[_0x1f73a3(0x14a)]))return![];if(!_0x1bfb7a['allTags']||!Array['isArray'](_0x1bfb7a[_0x1f73a3(0x16c)]))return![];if(!_0x1bfb7a['scriptSettings']||typeof _0x1bfb7a[_0x1f73a3(0x15a)]!==_0x1f73a3(0x154))return![];return!![];},'mergeWithDefaults':function(_0x2e7811){var _0x42bcab=_0x5bc6,_0x447566=JSON[_0x42bcab(0x183)](JSON[_0x42bcab(0x172)](this[_0x42bcab(0x18a)]));function _0x159987(_0x1b2e07,_0x149335){var _0x5c1b39=_0x42bcab;for(var _0xef2b58 in _0x149335){_0x149335['hasOwnProperty'](_0xef2b58)&&(typeof _0x149335[_0xef2b58]==='object'&&_0x149335[_0xef2b58]!==null&&!Array[_0x5c1b39(0x14e)](_0x149335[_0xef2b58])?((!_0x1b2e07[_0xef2b58]||typeof _0x1b2e07[_0xef2b58]!==_0x5c1b39(0x154))&&(_0x1b2e07[_0xef2b58]={}),_0x159987(_0x1b2e07[_0xef2b58],_0x149335[_0xef2b58])):_0x1b2e07[_0xef2b58]=_0x149335[_0xef2b58]);}}return _0x159987(_0x447566,_0x2e7811),_0x447566;},'migrateOldData':function(_0x38cabc){var _0x283dd3=_0x5bc6,_0x171e6c=JSON[_0x283dd3(0x183)](JSON[_0x283dd3(0x172)](this['defaultData']));if(_0x38cabc[_0x283dd3(0x149)])_0x171e6c[_0x283dd3(0x149)]=_0x38cabc['scriptsFolderPath'];if(_0x38cabc[_0x283dd3(0x15a)])_0x171e6c[_0x283dd3(0x15a)]=_0x38cabc[_0x283dd3(0x15a)];if(_0x38cabc['categories'])_0x171e6c[_0x283dd3(0x14a)]=_0x38cabc['categories'];if(_0x38cabc[_0x283dd3(0x16c)])_0x171e6c['allTags']=_0x38cabc[_0x283dd3(0x16c)];return _0x171e6c;},'createBackup':function(){var _0x2c8e4d=this;return new Promise(function(_0x4d0c9a,_0xa4c18d){var _0x461f3e=_0x5bc6,_0x30451d=_0x2c8e4d[_0x461f3e(0x17c)][_0x461f3e(0x162)](_0x461f3e(0x16b),_0x461f3e(0x15d)+Date[_0x461f3e(0x15b)]()+'.json');csInterface[_0x461f3e(0x14b)]('createDataBackup(\x22'+_0x2c8e4d['dataFilePath']+'\x22,\x20\x22'+_0x30451d+'\x22)',function(_0x3b3836){var _0xe8a6f2=_0x461f3e;_0x3b3836===_0xe8a6f2(0x18b)?_0x4d0c9a(_0x30451d):_0xa4c18d(_0xe8a6f2(0x14d)+_0x3b3836);});});},'exportData':function(){var _0x26eb94=this;return new Promise(function(_0xa85df0,_0x5d9d47){var _0xa76079=_0x5bc6;_0x26eb94[_0xa76079(0x17e)]()[_0xa76079(0x185)](function(_0x5a5ed1){var _0xdc98db=_0xa76079,_0x28c0cc=JSON['parse'](JSON[_0xdc98db(0x172)](_0x5a5ed1));delete _0x28c0cc[_0xdc98db(0x149)],_0xa85df0(_0x28c0cc);})[_0xa76079(0x15f)](_0x5d9d47);});},'importData':function(_0x4fd155){var _0x28d6df=this;return new Promise(function(_0x442588,_0x5567c9){var _0x516cac=_0x5bc6;try{if(!_0x28d6df['validateData'](_0x4fd155)){_0x5567c9('导入数据格式无效');return;}_0x28d6df[_0x516cac(0x16e)]()['then'](function(){var _0x3530b8=_0x516cac;return _0x28d6df[_0x3530b8(0x17e)]();})[_0x516cac(0x185)](function(_0x4dcb2d){var _0x24d0fe=_0x516cac,_0x494b85=_0x28d6df[_0x24d0fe(0x175)](_0x4fd155);return _0x494b85['scriptsFolderPath']=_0x4dcb2d[_0x24d0fe(0x149)],_0x28d6df[_0x24d0fe(0x163)](_0x494b85);})['then'](function(){_0x442588(!![]);})[_0x516cac(0x15f)](_0x5567c9);}catch(_0x488474){_0x5567c9('导入失败:\x20'+_0x488474[_0x516cac(0x178)]());}});}};function _0x5bc6(_0xa2c3f9,_0x3c9827){var _0x33513b=_0x3351();return _0x5bc6=function(_0x5bc68c,_0x4fd529){_0x5bc68c=_0x5bc68c-0x148;var _0xa3f5a5=_0x33513b[_0x5bc68c];return _0xa3f5a5;},_0x5bc6(_0xa2c3f9,_0x3c9827);}function _0x3351(){var _0xfa4680=['31948983MHhHev','_backup_','initialized','catch','scripts','DataManager检测步骤2:\x20成功保存数据类型:','replace','saveData','backgroundSettings','加载数据失败:','lastSaved','version','3kzFgIn','\x22,\x20\x22','DataManager检测步骤2:\x20未知数据类型:','.json','allTags','2229052qUtGUc','createBackup','576MmVIjq','validateData','DataManager检测步骤1:\x20加载完整数据失败:','stringify','未知的数据类型:\x20','8qSkqPv','mergeWithDefaults','undefined','loadDataFromFile(\x22','toString','exports','数据:','DataManager检测步骤1:\x20未知数据类型:','dataFilePath','migrateOldData','loadData','order','DataManager检测步骤2:\x20数据管理器未初始化','error','layoutSettings','parse','saveDataToFile(\x22','then','20065QNdGCA','7274652ytMdcC','autoReadSubfolders','scriptOrder','defaultData','success','toISOString','scriptsFolderPath','categories','evalScript','7mvikvx','备份失败:\x20','isArray','数据管理器未初始化','DataManager检测步骤1:\x20数据管理器未初始化','无法获取扩展数据路径','数据序列化失败:\x20','DataManager检测步骤2:\x20调用saveDataByType方法，数据类型:','object','11127480qRerji','log','getExtensionDataPath()','3103146IodTqm','1838IWTLRg','scriptSettings','now'];_0x3351=function(){return _0xfa4680;};return _0x3351();}typeof module!==_0x4237ad(0x176)&&module[_0x4237ad(0x179)]&&(module[_0x4237ad(0x179)]=DataManager);