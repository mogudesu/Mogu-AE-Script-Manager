var _0xb60b53=_0x333e;(function(_0x437850,_0x3c6ee1){var _0x31cb98=_0x333e,_0x887912=_0x437850();while(!![]){try{var _0x246940=-parseInt(_0x31cb98(0x1ab))/0x1+parseInt(_0x31cb98(0x186))/0x2*(-parseInt(_0x31cb98(0x198))/0x3)+-parseInt(_0x31cb98(0x199))/0x4*(parseInt(_0x31cb98(0x1a5))/0x5)+parseInt(_0x31cb98(0x19c))/0x6*(parseInt(_0x31cb98(0x1b5))/0x7)+parseInt(_0x31cb98(0x1a3))/0x8+parseInt(_0x31cb98(0x19d))/0x9*(-parseInt(_0x31cb98(0x182))/0xa)+parseInt(_0x31cb98(0x19f))/0xb*(parseInt(_0x31cb98(0x194))/0xc);if(_0x246940===_0x3c6ee1)break;else _0x887912['push'](_0x887912['shift']());}catch(_0x40e13c){_0x887912['push'](_0x887912['shift']());}}}(_0x33d3,0x5ca47));function _0x33d3(){var _0x52e8ac=['error','mergeWithDefaults','version','加载数据失败:','validateData','isArray','无法获取扩展数据路径','replace','dataFilePath','1.0','6228GlcWxp','数据验证失败','parse','stringify','98889aMQWyH','20JTmzVO','hasOwnProperty','导入失败:\x20','12jWvqdI','9eEXVTw','migrateOldData','16775bdlqlg','数据管理器未初始化','initialized','toString','3258680oCvvbs','evalScript','611530DYzajd','exports','loadDataFromFile(\x22','\x22,\x20\x22','getExtensionDataPath()','defaultData','579147uJJaQw','object','scriptSettings','createDataBackup(\x22','allTags','null','undefined','保存失败:\x20','.json','loadData','1852193vmgjXp','catch','then','919420hWLlNL','导入数据格式无效','scriptsFolderPath','categories','4zqYNkv','now','success','备份失败:\x20'];_0x33d3=function(){return _0x52e8ac;};return _0x33d3();}var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':_0xb60b53(0x193),'scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'scriptOrder':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'lastSaved':null},'init':function(_0x507969){var _0x52d25f=_0xb60b53,_0x30b9e4=this;if(_0x30b9e4[_0x52d25f(0x1a1)]){if(_0x507969)_0x507969(null,!![]);return;}csInterface[_0x52d25f(0x1a4)](_0x52d25f(0x1a9),function(_0x4aaa29){var _0x18e996=_0x52d25f;if(_0x4aaa29&&_0x4aaa29!==_0x18e996(0x1b0)){_0x30b9e4[_0x18e996(0x192)]=_0x4aaa29+'/moguBar_data.json',_0x30b9e4['initialized']=!![];if(_0x507969)_0x507969(null,!![]);}else{if(_0x507969)_0x507969(_0x18e996(0x190));}});},'loadData':function(_0x5b8cd6){var _0x38cc75=_0xb60b53,_0x1264fd=this;if(!_0x1264fd[_0x38cc75(0x1a1)]||!_0x1264fd[_0x38cc75(0x192)]){if(_0x5b8cd6)_0x5b8cd6('数据管理器未初始化');return;}csInterface[_0x38cc75(0x1a4)](_0x38cc75(0x1a7)+_0x1264fd[_0x38cc75(0x192)]+'\x22)',function(_0x2b1f67){var _0x3d8ed9=_0x38cc75;try{if(_0x2b1f67&&_0x2b1f67!==_0x3d8ed9(0x1b0)&&_0x2b1f67!==_0x3d8ed9(0x1b1)&&_0x2b1f67!=='{}'){var _0x1448fe=JSON[_0x3d8ed9(0x196)](_0x2b1f67);!_0x1448fe[_0x3d8ed9(0x18c)]&&(_0x1448fe=_0x1264fd[_0x3d8ed9(0x19e)](_0x1448fe));_0x1448fe=_0x1264fd[_0x3d8ed9(0x18b)](_0x1448fe);if(_0x5b8cd6)_0x5b8cd6(null,_0x1448fe);}else{if(_0x5b8cd6)_0x5b8cd6(null,JSON['parse'](JSON[_0x3d8ed9(0x197)](_0x1264fd['defaultData'])));}}catch(_0x3a1b66){console[_0x3d8ed9(0x18a)](_0x3d8ed9(0x18d),_0x3a1b66);if(_0x5b8cd6)_0x5b8cd6(null,JSON['parse'](JSON[_0x3d8ed9(0x197)](_0x1264fd[_0x3d8ed9(0x1aa)])));}});},'saveData':function(_0x293e9c,_0x237dcd){var _0x5e298c=_0xb60b53,_0x2af7b1=this;if(!_0x2af7b1[_0x5e298c(0x1a1)]||!_0x2af7b1[_0x5e298c(0x192)]){if(_0x237dcd)_0x237dcd(_0x5e298c(0x1a0));return;}try{_0x293e9c['lastSaved']=new Date()['toISOString']();if(!_0x2af7b1[_0x5e298c(0x18e)](_0x293e9c)){if(_0x237dcd)_0x237dcd(_0x5e298c(0x195));return;}var _0x156da2=JSON[_0x5e298c(0x197)](_0x293e9c,null,0x2),_0x85cba4=encodeURIComponent(_0x156da2);csInterface[_0x5e298c(0x1a4)]('saveDataToFile(\x22'+_0x2af7b1[_0x5e298c(0x192)]+_0x5e298c(0x1a8)+_0x85cba4+'\x22)',function(_0xd533ee){var _0x73eb22=_0x5e298c;if(_0xd533ee===_0x73eb22(0x188)){if(_0x237dcd)_0x237dcd(null,!![]);}else{if(_0x237dcd)_0x237dcd(_0x73eb22(0x1b2)+_0xd533ee);}});}catch(_0x280c4d){if(_0x237dcd)_0x237dcd('数据序列化失败:\x20'+_0x280c4d[_0x5e298c(0x1a2)]());}},'validateData':function(_0x4f3c65){var _0x2307fc=_0xb60b53;if(!_0x4f3c65||typeof _0x4f3c65!==_0x2307fc(0x1ac))return![];if(!_0x4f3c65[_0x2307fc(0x185)]||!Array[_0x2307fc(0x18f)](_0x4f3c65['categories']))return![];if(!_0x4f3c65[_0x2307fc(0x1af)]||!Array['isArray'](_0x4f3c65[_0x2307fc(0x1af)]))return![];if(!_0x4f3c65[_0x2307fc(0x1ad)]||typeof _0x4f3c65[_0x2307fc(0x1ad)]!=='object')return![];return!![];},'mergeWithDefaults':function(_0x225116){var _0x2b029b=_0xb60b53,_0x1ebe15=JSON['parse'](JSON[_0x2b029b(0x197)](this[_0x2b029b(0x1aa)]));function _0x244c03(_0x402098,_0x483e9d){var _0x3bef60=_0x2b029b;for(var _0x474765 in _0x483e9d){_0x483e9d[_0x3bef60(0x19a)](_0x474765)&&(typeof _0x483e9d[_0x474765]===_0x3bef60(0x1ac)&&_0x483e9d[_0x474765]!==null&&!Array[_0x3bef60(0x18f)](_0x483e9d[_0x474765])?((!_0x402098[_0x474765]||typeof _0x402098[_0x474765]!=='object')&&(_0x402098[_0x474765]={}),_0x244c03(_0x402098[_0x474765],_0x483e9d[_0x474765])):_0x402098[_0x474765]=_0x483e9d[_0x474765]);}}return _0x244c03(_0x1ebe15,_0x225116),_0x1ebe15;},'migrateOldData':function(_0x4e945e){var _0x44a246=_0xb60b53,_0x432aec=JSON[_0x44a246(0x196)](JSON[_0x44a246(0x197)](this[_0x44a246(0x1aa)]));if(_0x4e945e['scriptsFolderPath'])_0x432aec['scriptsFolderPath']=_0x4e945e[_0x44a246(0x184)];if(_0x4e945e[_0x44a246(0x1ad)])_0x432aec[_0x44a246(0x1ad)]=_0x4e945e[_0x44a246(0x1ad)];if(_0x4e945e[_0x44a246(0x185)])_0x432aec['categories']=_0x4e945e[_0x44a246(0x185)];if(_0x4e945e[_0x44a246(0x1af)])_0x432aec['allTags']=_0x4e945e[_0x44a246(0x1af)];return _0x432aec;},'createBackup':function(){var _0xb95ffe=this;return new Promise(function(_0x2375f2,_0x3ab605){var _0x5e7b57=_0x333e,_0x2fdf89=_0xb95ffe[_0x5e7b57(0x192)][_0x5e7b57(0x191)](_0x5e7b57(0x1b3),'_backup_'+Date[_0x5e7b57(0x187)]()+_0x5e7b57(0x1b3));csInterface[_0x5e7b57(0x1a4)](_0x5e7b57(0x1ae)+_0xb95ffe[_0x5e7b57(0x192)]+'\x22,\x20\x22'+_0x2fdf89+'\x22)',function(_0x2867f3){var _0x46a66f=_0x5e7b57;_0x2867f3===_0x46a66f(0x188)?_0x2375f2(_0x2fdf89):_0x3ab605(_0x46a66f(0x189)+_0x2867f3);});});},'exportData':function(){var _0xc7219d=this;return new Promise(function(_0x32f1ff,_0x446453){var _0xdd05c9=_0x333e;_0xc7219d[_0xdd05c9(0x1b4)]()[_0xdd05c9(0x181)](function(_0x2fb108){var _0x62dab8=_0xdd05c9,_0x48385d=JSON[_0x62dab8(0x196)](JSON[_0x62dab8(0x197)](_0x2fb108));delete _0x48385d[_0x62dab8(0x184)],_0x32f1ff(_0x48385d);})[_0xdd05c9(0x1b6)](_0x446453);});},'importData':function(_0x24c554){var _0x318e10=this;return new Promise(function(_0x5f3f13,_0x3ba9f3){var _0x556e68=_0x333e;try{if(!_0x318e10[_0x556e68(0x18e)](_0x24c554)){_0x3ba9f3(_0x556e68(0x183));return;}_0x318e10['createBackup']()[_0x556e68(0x181)](function(){var _0x315752=_0x556e68;return _0x318e10[_0x315752(0x1b4)]();})[_0x556e68(0x181)](function(_0x5a031a){var _0x265a17=_0x556e68,_0x37fc12=_0x318e10[_0x265a17(0x18b)](_0x24c554);return _0x37fc12['scriptsFolderPath']=_0x5a031a[_0x265a17(0x184)],_0x318e10['saveData'](_0x37fc12);})[_0x556e68(0x181)](function(){_0x5f3f13(!![]);})['catch'](_0x3ba9f3);}catch(_0x1129f2){_0x3ba9f3(_0x556e68(0x19b)+_0x1129f2[_0x556e68(0x1a2)]());}});}};function _0x333e(_0x4d531c,_0x12d006){var _0x33d305=_0x33d3();return _0x333e=function(_0x333e83,_0x43673f){_0x333e83=_0x333e83-0x181;var _0x55f3f1=_0x33d305[_0x333e83];return _0x55f3f1;},_0x333e(_0x4d531c,_0x12d006);}typeof module!=='undefined'&&module[_0xb60b53(0x1a6)]&&(module['exports']=DataManager);