function _0x4e98(){var _0x25f6a0=['null','1455264iItbus','无法获取扩展数据路径','parse','isArray','now','evalScript','replace','1707549BqQDzS','dataFilePath','2kcWkIz','导入失败:\x20','.json','数据验证失败','516286FyEODk','345443xDNDTo','undefined','scriptsFolderPath','_backup_','362775udTUIh','defaultData','70RPUJJb','saveData','allTags','数据序列化失败:\x20','then','保存失败:\x20','exports','\x22,\x20\x22','createDataBackup(\x22','数据管理器未初始化','lastSaved','1983628jOqBMk','toString','stringify','scriptSettings','migrateOldData','saveDataToFile(\x22','24UoKJmD','4115192HOObVu','catch','validateData','createBackup','mergeWithDefaults','initialized','object','success','loadData','加载数据失败:','loadDataFromFile(\x22'];_0x4e98=function(){return _0x25f6a0;};return _0x4e98();}var _0xd53833=_0x52dc;function _0x52dc(_0x3dcbc8,_0x4d822f){var _0x4e9843=_0x4e98();return _0x52dc=function(_0x52dc54,_0x485072){_0x52dc54=_0x52dc54-0x192;var _0x593257=_0x4e9843[_0x52dc54];return _0x593257;},_0x52dc(_0x3dcbc8,_0x4d822f);}(function(_0x3d619a,_0x36f92c){var _0x5f42fd=_0x52dc,_0x561491=_0x3d619a();while(!![]){try{var _0x3089e2=-parseInt(_0x5f42fd(0x1c0))/0x1*(-parseInt(_0x5f42fd(0x1bc))/0x2)+parseInt(_0x5f42fd(0x1ba))/0x3+-parseInt(_0x5f42fd(0x1a0))/0x4+parseInt(_0x5f42fd(0x193))/0x5*(parseInt(_0x5f42fd(0x1a6))/0x6)+parseInt(_0x5f42fd(0x1c1))/0x7+parseInt(_0x5f42fd(0x1a7))/0x8+parseInt(_0x5f42fd(0x1b3))/0x9*(-parseInt(_0x5f42fd(0x195))/0xa);if(_0x3089e2===_0x36f92c)break;else _0x561491['push'](_0x561491['shift']());}catch(_0xafe5e5){_0x561491['push'](_0x561491['shift']());}}}(_0x4e98,0x4c16a));var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':'1.0','scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'lastSaved':null},'init':function(_0x3e620b){var _0x2a7b5a=_0x52dc,_0x2cdbf1=this;if(_0x2cdbf1['initialized']){if(_0x3e620b)_0x3e620b(null,!![]);return;}csInterface[_0x2a7b5a(0x1b8)]('getExtensionDataPath()',function(_0x1b7c6d){var _0x38a225=_0x2a7b5a;if(_0x1b7c6d&&_0x1b7c6d!==_0x38a225(0x1b2)){_0x2cdbf1['dataFilePath']=_0x1b7c6d+'/moguBar_data.json',_0x2cdbf1[_0x38a225(0x1ac)]=!![];if(_0x3e620b)_0x3e620b(null,!![]);}else{if(_0x3e620b)_0x3e620b(_0x38a225(0x1b4));}});},'loadData':function(_0x1e9fe6){var _0x35b14d=_0x52dc,_0x159d30=this;if(!_0x159d30[_0x35b14d(0x1ac)]||!_0x159d30[_0x35b14d(0x1bb)]){if(_0x1e9fe6)_0x1e9fe6(_0x35b14d(0x19e));return;}csInterface[_0x35b14d(0x1b8)](_0x35b14d(0x1b1)+_0x159d30[_0x35b14d(0x1bb)]+'\x22)',function(_0x4023d5){var _0x1eeb15=_0x35b14d;try{if(_0x4023d5&&_0x4023d5!==_0x1eeb15(0x1b2)&&_0x4023d5!==_0x1eeb15(0x1c2)&&_0x4023d5!=='{}'){var _0x4661f7=JSON[_0x1eeb15(0x1b5)](_0x4023d5);!_0x4661f7['version']&&(_0x4661f7=_0x159d30[_0x1eeb15(0x1a4)](_0x4661f7));_0x4661f7=_0x159d30[_0x1eeb15(0x1ab)](_0x4661f7);if(_0x1e9fe6)_0x1e9fe6(null,_0x4661f7);}else{if(_0x1e9fe6)_0x1e9fe6(null,JSON[_0x1eeb15(0x1b5)](JSON[_0x1eeb15(0x1a2)](_0x159d30['defaultData'])));}}catch(_0x359333){console['error'](_0x1eeb15(0x1b0),_0x359333);if(_0x1e9fe6)_0x1e9fe6(null,JSON['parse'](JSON[_0x1eeb15(0x1a2)](_0x159d30[_0x1eeb15(0x194)])));}});},'saveData':function(_0x171c7d,_0x455587){var _0x1321c5=_0x52dc,_0x241a81=this;if(!_0x241a81[_0x1321c5(0x1ac)]||!_0x241a81[_0x1321c5(0x1bb)]){if(_0x455587)_0x455587(_0x1321c5(0x19e));return;}try{_0x171c7d[_0x1321c5(0x19f)]=new Date()['toISOString']();if(!_0x241a81['validateData'](_0x171c7d)){if(_0x455587)_0x455587(_0x1321c5(0x1bf));return;}var _0x53e291=JSON[_0x1321c5(0x1a2)](_0x171c7d,null,0x2),_0x13c2c5=encodeURIComponent(_0x53e291);csInterface[_0x1321c5(0x1b8)](_0x1321c5(0x1a5)+_0x241a81['dataFilePath']+_0x1321c5(0x19c)+_0x13c2c5+'\x22)',function(_0x432294){var _0x537a42=_0x1321c5;if(_0x432294===_0x537a42(0x1ae)){if(_0x455587)_0x455587(null,!![]);}else{if(_0x455587)_0x455587(_0x537a42(0x19a)+_0x432294);}});}catch(_0x4027d8){if(_0x455587)_0x455587(_0x1321c5(0x198)+_0x4027d8[_0x1321c5(0x1a1)]());}},'validateData':function(_0x5d6b93){var _0x2754a5=_0x52dc;if(!_0x5d6b93||typeof _0x5d6b93!==_0x2754a5(0x1ad))return![];if(!_0x5d6b93['categories']||!Array[_0x2754a5(0x1b6)](_0x5d6b93['categories']))return![];if(!_0x5d6b93[_0x2754a5(0x197)]||!Array['isArray'](_0x5d6b93['allTags']))return![];if(!_0x5d6b93[_0x2754a5(0x1a3)]||typeof _0x5d6b93['scriptSettings']!==_0x2754a5(0x1ad))return![];return!![];},'mergeWithDefaults':function(_0x1416c5){var _0x31f6ba=_0x52dc,_0x2802cd=JSON[_0x31f6ba(0x1b5)](JSON[_0x31f6ba(0x1a2)](this[_0x31f6ba(0x194)]));function _0x554992(_0x133c95,_0x24dec7){var _0xcade99=_0x31f6ba;for(var _0x553a5b in _0x24dec7){_0x24dec7['hasOwnProperty'](_0x553a5b)&&(typeof _0x24dec7[_0x553a5b]==='object'&&_0x24dec7[_0x553a5b]!==null&&!Array['isArray'](_0x24dec7[_0x553a5b])?((!_0x133c95[_0x553a5b]||typeof _0x133c95[_0x553a5b]!==_0xcade99(0x1ad))&&(_0x133c95[_0x553a5b]={}),_0x554992(_0x133c95[_0x553a5b],_0x24dec7[_0x553a5b])):_0x133c95[_0x553a5b]=_0x24dec7[_0x553a5b]);}}return _0x554992(_0x2802cd,_0x1416c5),_0x2802cd;},'migrateOldData':function(_0x4d2b3c){var _0x103503=_0x52dc,_0x17966c=JSON[_0x103503(0x1b5)](JSON[_0x103503(0x1a2)](this[_0x103503(0x194)]));if(_0x4d2b3c['scriptsFolderPath'])_0x17966c[_0x103503(0x1c3)]=_0x4d2b3c[_0x103503(0x1c3)];if(_0x4d2b3c['scriptSettings'])_0x17966c[_0x103503(0x1a3)]=_0x4d2b3c[_0x103503(0x1a3)];if(_0x4d2b3c['categories'])_0x17966c['categories']=_0x4d2b3c['categories'];if(_0x4d2b3c[_0x103503(0x197)])_0x17966c[_0x103503(0x197)]=_0x4d2b3c[_0x103503(0x197)];return _0x17966c;},'createBackup':function(){var _0x255bc1=this;return new Promise(function(_0x555e84,_0x5245ad){var _0x8f6d26=_0x52dc,_0x295bae=_0x255bc1[_0x8f6d26(0x1bb)][_0x8f6d26(0x1b9)]('.json',_0x8f6d26(0x192)+Date[_0x8f6d26(0x1b7)]()+_0x8f6d26(0x1be));csInterface['evalScript'](_0x8f6d26(0x19d)+_0x255bc1[_0x8f6d26(0x1bb)]+_0x8f6d26(0x19c)+_0x295bae+'\x22)',function(_0x4637d5){_0x4637d5==='success'?_0x555e84(_0x295bae):_0x5245ad('备份失败:\x20'+_0x4637d5);});});},'exportData':function(){var _0x5657b8=this;return new Promise(function(_0x37ac51,_0x6c00c6){var _0x253f0a=_0x52dc;_0x5657b8[_0x253f0a(0x1af)]()[_0x253f0a(0x199)](function(_0x34bf94){var _0x352109=_0x253f0a,_0x13d891=JSON[_0x352109(0x1b5)](JSON[_0x352109(0x1a2)](_0x34bf94));delete _0x13d891['scriptsFolderPath'],_0x37ac51(_0x13d891);})[_0x253f0a(0x1a8)](_0x6c00c6);});},'importData':function(_0x4d921a){var _0x1cca7f=this;return new Promise(function(_0x1bc5fb,_0xfd7727){var _0x41daa2=_0x52dc;try{if(!_0x1cca7f[_0x41daa2(0x1a9)](_0x4d921a)){_0xfd7727('导入数据格式无效');return;}_0x1cca7f[_0x41daa2(0x1aa)]()[_0x41daa2(0x199)](function(){var _0x469404=_0x41daa2;return _0x1cca7f[_0x469404(0x1af)]();})[_0x41daa2(0x199)](function(_0x501198){var _0x11e7f5=_0x41daa2,_0xb5f45a=_0x1cca7f['mergeWithDefaults'](_0x4d921a);return _0xb5f45a[_0x11e7f5(0x1c3)]=_0x501198[_0x11e7f5(0x1c3)],_0x1cca7f[_0x11e7f5(0x196)](_0xb5f45a);})['then'](function(){_0x1bc5fb(!![]);})['catch'](_0xfd7727);}catch(_0x5797c4){_0xfd7727(_0x41daa2(0x1bd)+_0x5797c4['toString']());}});}};typeof module!==_0xd53833(0x1c2)&&module[_0xd53833(0x19b)]&&(module[_0xd53833(0x19b)]=DataManager);