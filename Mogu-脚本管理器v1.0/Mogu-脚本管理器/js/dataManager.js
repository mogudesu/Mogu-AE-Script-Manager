var _0x42c399=_0x474f;(function(_0x226639,_0x56bce3){var _0x16dfd1=_0x474f,_0xfe539d=_0x226639();while(!![]){try{var _0x26f98f=-parseInt(_0x16dfd1(0x1c1))/0x1*(parseInt(_0x16dfd1(0x1c7))/0x2)+parseInt(_0x16dfd1(0x1c5))/0x3*(parseInt(_0x16dfd1(0x1cd))/0x4)+parseInt(_0x16dfd1(0x1cc))/0x5+-parseInt(_0x16dfd1(0x1c2))/0x6+-parseInt(_0x16dfd1(0x1d4))/0x7+parseInt(_0x16dfd1(0x1a5))/0x8+parseInt(_0x16dfd1(0x1ab))/0x9;if(_0x26f98f===_0x56bce3)break;else _0xfe539d['push'](_0xfe539d['shift']());}catch(_0x394e3f){_0xfe539d['push'](_0xfe539d['shift']());}}}(_0x51c9,0x7b921));var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':_0x42c399(0x1a7),'scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'scriptOrder':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'autoReadSubfolders':!![],'lastSaved':null},'init':function(_0x526e56){var _0x10e39f=_0x42c399,_0xea4ee2=this;if(_0xea4ee2[_0x10e39f(0x1b0)]){if(_0x526e56)_0x526e56(null,!![]);return;}csInterface[_0x10e39f(0x1b4)]('getExtensionDataPath()',function(_0x58fa83){var _0x52c85a=_0x10e39f;if(_0x58fa83&&_0x58fa83!==_0x52c85a(0x1ad)){_0xea4ee2[_0x52c85a(0x1a4)]=_0x58fa83+_0x52c85a(0x1c9),_0xea4ee2[_0x52c85a(0x1b0)]=!![];if(_0x526e56)_0x526e56(null,!![]);}else{if(_0x526e56)_0x526e56('无法获取扩展数据路径');}});},'loadData':function(_0x2e5853){var _0x3dcd2e=_0x42c399,_0x20669a=this;if(!_0x20669a['initialized']||!_0x20669a[_0x3dcd2e(0x1a4)]){if(_0x2e5853)_0x2e5853(_0x3dcd2e(0x1b7));return;}csInterface[_0x3dcd2e(0x1b4)](_0x3dcd2e(0x1c0)+_0x20669a[_0x3dcd2e(0x1a4)]+'\x22)',function(_0x481a40){var _0x228aed=_0x3dcd2e;try{if(_0x481a40&&_0x481a40!==_0x228aed(0x1ad)&&_0x481a40!=='undefined'&&_0x481a40!=='{}'){var _0x115ad5=JSON['parse'](_0x481a40);!_0x115ad5[_0x228aed(0x1bc)]&&(_0x115ad5=_0x20669a[_0x228aed(0x1b8)](_0x115ad5));_0x115ad5=_0x20669a[_0x228aed(0x1ce)](_0x115ad5);if(_0x2e5853)_0x2e5853(null,_0x115ad5);}else{if(_0x2e5853)_0x2e5853(null,JSON[_0x228aed(0x1cf)](JSON[_0x228aed(0x1a6)](_0x20669a[_0x228aed(0x1b3)])));}}catch(_0x379aee){console[_0x228aed(0x1bf)](_0x228aed(0x1b5),_0x379aee);if(_0x2e5853)_0x2e5853(null,JSON[_0x228aed(0x1cf)](JSON[_0x228aed(0x1a6)](_0x20669a[_0x228aed(0x1b3)])));}});},'saveData':function(_0x39ff7d,_0x2b387a){var _0x205574=_0x42c399,_0x448e62=this;if(!_0x448e62[_0x205574(0x1b0)]||!_0x448e62[_0x205574(0x1a4)]){if(_0x2b387a)_0x2b387a('数据管理器未初始化');return;}try{_0x39ff7d[_0x205574(0x1bb)]=new Date()[_0x205574(0x1b6)]();if(!_0x448e62[_0x205574(0x1a3)](_0x39ff7d)){if(_0x2b387a)_0x2b387a(_0x205574(0x1ac));return;}var _0x431607=JSON['stringify'](_0x39ff7d,null,0x2),_0x31d370=encodeURIComponent(_0x431607);csInterface[_0x205574(0x1b4)](_0x205574(0x1b1)+_0x448e62[_0x205574(0x1a4)]+_0x205574(0x1d3)+_0x31d370+'\x22)',function(_0x52337a){var _0x13244a=_0x205574;if(_0x52337a===_0x13244a(0x1aa)){if(_0x2b387a)_0x2b387a(null,!![]);}else{if(_0x2b387a)_0x2b387a(_0x13244a(0x1d1)+_0x52337a);}});}catch(_0x15ddc7){if(_0x2b387a)_0x2b387a(_0x205574(0x1c4)+_0x15ddc7[_0x205574(0x1af)]());}},'validateData':function(_0x129ccc){var _0x3039b0=_0x42c399;if(!_0x129ccc||typeof _0x129ccc!==_0x3039b0(0x1b2))return![];if(!_0x129ccc[_0x3039b0(0x1c3)]||!Array['isArray'](_0x129ccc[_0x3039b0(0x1c3)]))return![];if(!_0x129ccc[_0x3039b0(0x1d2)]||!Array[_0x3039b0(0x1d0)](_0x129ccc[_0x3039b0(0x1d2)]))return![];if(!_0x129ccc[_0x3039b0(0x1ae)]||typeof _0x129ccc[_0x3039b0(0x1ae)]!=='object')return![];return!![];},'mergeWithDefaults':function(_0x397637){var _0x45f0b6=_0x42c399,_0x444c99=JSON[_0x45f0b6(0x1cf)](JSON[_0x45f0b6(0x1a6)](this[_0x45f0b6(0x1b3)]));function _0x2fa361(_0x5ab7d5,_0x241c8a){var _0xbba2d2=_0x45f0b6;for(var _0x1a39ca in _0x241c8a){_0x241c8a['hasOwnProperty'](_0x1a39ca)&&(typeof _0x241c8a[_0x1a39ca]===_0xbba2d2(0x1b2)&&_0x241c8a[_0x1a39ca]!==null&&!Array['isArray'](_0x241c8a[_0x1a39ca])?((!_0x5ab7d5[_0x1a39ca]||typeof _0x5ab7d5[_0x1a39ca]!==_0xbba2d2(0x1b2))&&(_0x5ab7d5[_0x1a39ca]={}),_0x2fa361(_0x5ab7d5[_0x1a39ca],_0x241c8a[_0x1a39ca])):_0x5ab7d5[_0x1a39ca]=_0x241c8a[_0x1a39ca]);}}return _0x2fa361(_0x444c99,_0x397637),_0x444c99;},'migrateOldData':function(_0x3f4a86){var _0x488556=_0x42c399,_0x41026c=JSON[_0x488556(0x1cf)](JSON[_0x488556(0x1a6)](this[_0x488556(0x1b3)]));if(_0x3f4a86[_0x488556(0x1bd)])_0x41026c[_0x488556(0x1bd)]=_0x3f4a86[_0x488556(0x1bd)];if(_0x3f4a86[_0x488556(0x1ae)])_0x41026c[_0x488556(0x1ae)]=_0x3f4a86['scriptSettings'];if(_0x3f4a86['categories'])_0x41026c[_0x488556(0x1c3)]=_0x3f4a86[_0x488556(0x1c3)];if(_0x3f4a86['allTags'])_0x41026c['allTags']=_0x3f4a86[_0x488556(0x1d2)];return _0x41026c;},'createBackup':function(){var _0x1cc567=this;return new Promise(function(_0x9b9b7a,_0x2b0ce1){var _0x490b3c=_0x474f,_0x80b102=_0x1cc567['dataFilePath']['replace']('.json','_backup_'+Date[_0x490b3c(0x1ba)]()+_0x490b3c(0x1c6));csInterface[_0x490b3c(0x1b4)]('createDataBackup(\x22'+_0x1cc567[_0x490b3c(0x1a4)]+'\x22,\x20\x22'+_0x80b102+'\x22)',function(_0x5f01e0){var _0x537e0b=_0x490b3c;_0x5f01e0==='success'?_0x9b9b7a(_0x80b102):_0x2b0ce1(_0x537e0b(0x1c8)+_0x5f01e0);});});},'exportData':function(){var _0x6b6899=this;return new Promise(function(_0xa76c21,_0x52dc64){var _0x34cf81=_0x474f;_0x6b6899['loadData']()[_0x34cf81(0x1cb)](function(_0x25c6f9){var _0x436b8e=_0x34cf81,_0x539beb=JSON[_0x436b8e(0x1cf)](JSON[_0x436b8e(0x1a6)](_0x25c6f9));delete _0x539beb[_0x436b8e(0x1bd)],_0xa76c21(_0x539beb);})[_0x34cf81(0x1be)](_0x52dc64);});},'importData':function(_0x50b5ef){var _0x54d85d=this;return new Promise(function(_0x2db669,_0x5650e0){var _0xd4fd26=_0x474f;try{if(!_0x54d85d[_0xd4fd26(0x1a3)](_0x50b5ef)){_0x5650e0(_0xd4fd26(0x1a8));return;}_0x54d85d['createBackup']()['then'](function(){var _0x5765dd=_0xd4fd26;return _0x54d85d[_0x5765dd(0x1ca)]();})[_0xd4fd26(0x1cb)](function(_0x173a7e){var _0x11cde3=_0xd4fd26,_0x2a2f8c=_0x54d85d['mergeWithDefaults'](_0x50b5ef);return _0x2a2f8c[_0x11cde3(0x1bd)]=_0x173a7e[_0x11cde3(0x1bd)],_0x54d85d[_0x11cde3(0x1b9)](_0x2a2f8c);})[_0xd4fd26(0x1cb)](function(){_0x2db669(!![]);})['catch'](_0x5650e0);}catch(_0x135d0f){_0x5650e0('导入失败:\x20'+_0x135d0f[_0xd4fd26(0x1af)]());}});}};function _0x474f(_0x364f2b,_0x24d4d7){var _0x51c94e=_0x51c9();return _0x474f=function(_0x474f78,_0x125a06){_0x474f78=_0x474f78-0x1a3;var _0x167b14=_0x51c94e[_0x474f78];return _0x167b14;},_0x474f(_0x364f2b,_0x24d4d7);}typeof module!=='undefined'&&module['exports']&&(module[_0x42c399(0x1a9)]=DataManager);function _0x51c9(){var _0x3be355=['saveData','now','lastSaved','version','scriptsFolderPath','catch','error','loadDataFromFile(\x22','403551EZcYDJ','999480OxRNTu','categories','数据序列化失败:\x20','752799UuPDUV','.json','4FfjiQc','备份失败:\x20','/moguBar_data.json','loadData','then','901530CTocPb','8oIZRPh','mergeWithDefaults','parse','isArray','保存失败:\x20','allTags','\x22,\x20\x22','1468299baaYqR','validateData','dataFilePath','3069648TTVlKZ','stringify','1.0','导入数据格式无效','exports','success','5613354EYEJSv','数据验证失败','null','scriptSettings','toString','initialized','saveDataToFile(\x22','object','defaultData','evalScript','加载数据失败:','toISOString','数据管理器未初始化','migrateOldData'];_0x51c9=function(){return _0x3be355;};return _0x51c9();}