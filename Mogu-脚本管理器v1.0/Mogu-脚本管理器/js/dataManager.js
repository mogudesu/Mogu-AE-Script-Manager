var _0x26cd58=_0x17dc;function _0x17dc(_0x2b10bd,_0x573d9e){var _0x2dce86=_0x2dce();return _0x17dc=function(_0x17dce8,_0x31db9e){_0x17dce8=_0x17dce8-0x1d0;var _0x4ba8db=_0x2dce86[_0x17dce8];return _0x4ba8db;},_0x17dc(_0x2b10bd,_0x573d9e);}(function(_0x5eb6dc,_0x3ad7be){var _0x46a9de=_0x17dc,_0x2b8b88=_0x5eb6dc();while(!![]){try{var _0x2a902c=-parseInt(_0x46a9de(0x1e2))/0x1*(parseInt(_0x46a9de(0x1e1))/0x2)+parseInt(_0x46a9de(0x1fd))/0x3*(-parseInt(_0x46a9de(0x1d0))/0x4)+parseInt(_0x46a9de(0x201))/0x5*(-parseInt(_0x46a9de(0x1f9))/0x6)+parseInt(_0x46a9de(0x1e6))/0x7*(-parseInt(_0x46a9de(0x1f5))/0x8)+parseInt(_0x46a9de(0x1e5))/0x9+-parseInt(_0x46a9de(0x1f1))/0xa*(-parseInt(_0x46a9de(0x1ff))/0xb)+parseInt(_0x46a9de(0x1da))/0xc;if(_0x2a902c===_0x3ad7be)break;else _0x2b8b88['push'](_0x2b8b88['shift']());}catch(_0x35ab34){_0x2b8b88['push'](_0x2b8b88['shift']());}}}(_0x2dce,0x9e750));function _0x2dce(){var _0x56f3b9=['21ebQyil','导入失败:\x20','validateData','then','mergeWithDefaults','scriptSettings','object','lastSaved','scriptsFolderPath','/moguBar_data.json','parse','18410NmieFC','createDataBackup(\x22','error','exports','286112pFfvWJ','dataFilePath','allTags','success','429342tmLcHN','toString','replace','createBackup','39qFBlDW','1.0','5599ZeqkZj','导入数据格式无效','90SEHnVq','数据管理器未初始化','undefined','88724TSvVHE','catch','数据序列化失败:\x20','null','loadData','isArray','hasOwnProperty','initialized','evalScript','categories','18690564rxEPYl','loadDataFromFile(\x22','stringify','无法获取扩展数据路径','\x22,\x20\x22','保存失败:\x20','migrateOldData','316lGvVVY','3769TmUnLk','defaultData','.json','3902373PoyWCY'];_0x2dce=function(){return _0x56f3b9;};return _0x2dce();}var DataManager={'dataFilePath':null,'initialized':![],'defaultData':{'version':_0x26cd58(0x1fe),'scriptsFolderPath':null,'scriptSettings':{},'categories':['全部'],'allTags':[],'scriptOrder':[],'layoutSettings':{'isGridLayout':![],'currentScale':0x1,'sidebarWidth':0x64},'backgroundSettings':null,'lastSaved':null},'init':function(_0x349ed5){var _0x1f362e=_0x26cd58,_0x4aaac5=this;if(_0x4aaac5[_0x1f362e(0x1d7)]){if(_0x349ed5)_0x349ed5(null,!![]);return;}csInterface[_0x1f362e(0x1d8)]('getExtensionDataPath()',function(_0x58352f){var _0x52e696=_0x1f362e;if(_0x58352f&&_0x58352f!==_0x52e696(0x1d3)){_0x4aaac5[_0x52e696(0x1f6)]=_0x58352f+_0x52e696(0x1ef),_0x4aaac5[_0x52e696(0x1d7)]=!![];if(_0x349ed5)_0x349ed5(null,!![]);}else{if(_0x349ed5)_0x349ed5(_0x52e696(0x1dd));}});},'loadData':function(_0x43f2d2){var _0x13cb4a=_0x26cd58,_0x49e358=this;if(!_0x49e358[_0x13cb4a(0x1d7)]||!_0x49e358[_0x13cb4a(0x1f6)]){if(_0x43f2d2)_0x43f2d2(_0x13cb4a(0x202));return;}csInterface['evalScript'](_0x13cb4a(0x1db)+_0x49e358['dataFilePath']+'\x22)',function(_0x3fdba0){var _0x24c2f6=_0x13cb4a;try{if(_0x3fdba0&&_0x3fdba0!=='null'&&_0x3fdba0!==_0x24c2f6(0x203)&&_0x3fdba0!=='{}'){var _0x1da897=JSON['parse'](_0x3fdba0);!_0x1da897['version']&&(_0x1da897=_0x49e358[_0x24c2f6(0x1e0)](_0x1da897));_0x1da897=_0x49e358[_0x24c2f6(0x1ea)](_0x1da897);if(_0x43f2d2)_0x43f2d2(null,_0x1da897);}else{if(_0x43f2d2)_0x43f2d2(null,JSON[_0x24c2f6(0x1f0)](JSON['stringify'](_0x49e358[_0x24c2f6(0x1e3)])));}}catch(_0x509cd7){console[_0x24c2f6(0x1f3)]('加载数据失败:',_0x509cd7);if(_0x43f2d2)_0x43f2d2(null,JSON[_0x24c2f6(0x1f0)](JSON['stringify'](_0x49e358[_0x24c2f6(0x1e3)])));}});},'saveData':function(_0x502881,_0x5b6711){var _0x90fc57=_0x26cd58,_0x1fca7d=this;if(!_0x1fca7d[_0x90fc57(0x1d7)]||!_0x1fca7d[_0x90fc57(0x1f6)]){if(_0x5b6711)_0x5b6711(_0x90fc57(0x202));return;}try{_0x502881[_0x90fc57(0x1ed)]=new Date()['toISOString']();if(!_0x1fca7d[_0x90fc57(0x1e8)](_0x502881)){if(_0x5b6711)_0x5b6711('数据验证失败');return;}var _0x1eec22=JSON[_0x90fc57(0x1dc)](_0x502881,null,0x2),_0x692a96=encodeURIComponent(_0x1eec22);csInterface['evalScript']('saveDataToFile(\x22'+_0x1fca7d[_0x90fc57(0x1f6)]+_0x90fc57(0x1de)+_0x692a96+'\x22)',function(_0x2dd03e){var _0x50b762=_0x90fc57;if(_0x2dd03e===_0x50b762(0x1f8)){if(_0x5b6711)_0x5b6711(null,!![]);}else{if(_0x5b6711)_0x5b6711(_0x50b762(0x1df)+_0x2dd03e);}});}catch(_0x44e426){if(_0x5b6711)_0x5b6711(_0x90fc57(0x1d2)+_0x44e426['toString']());}},'validateData':function(_0x1951b0){var _0x1b6cac=_0x26cd58;if(!_0x1951b0||typeof _0x1951b0!==_0x1b6cac(0x1ec))return![];if(!_0x1951b0[_0x1b6cac(0x1d9)]||!Array[_0x1b6cac(0x1d5)](_0x1951b0['categories']))return![];if(!_0x1951b0[_0x1b6cac(0x1f7)]||!Array['isArray'](_0x1951b0[_0x1b6cac(0x1f7)]))return![];if(!_0x1951b0[_0x1b6cac(0x1eb)]||typeof _0x1951b0[_0x1b6cac(0x1eb)]!==_0x1b6cac(0x1ec))return![];return!![];},'mergeWithDefaults':function(_0x1db4b5){var _0x4ac5a2=_0x26cd58,_0x1529be=JSON[_0x4ac5a2(0x1f0)](JSON[_0x4ac5a2(0x1dc)](this[_0x4ac5a2(0x1e3)]));function _0x280e4b(_0x1aab7b,_0x4a6b68){var _0x1d3155=_0x4ac5a2;for(var _0x20c190 in _0x4a6b68){_0x4a6b68[_0x1d3155(0x1d6)](_0x20c190)&&(typeof _0x4a6b68[_0x20c190]===_0x1d3155(0x1ec)&&_0x4a6b68[_0x20c190]!==null&&!Array['isArray'](_0x4a6b68[_0x20c190])?((!_0x1aab7b[_0x20c190]||typeof _0x1aab7b[_0x20c190]!=='object')&&(_0x1aab7b[_0x20c190]={}),_0x280e4b(_0x1aab7b[_0x20c190],_0x4a6b68[_0x20c190])):_0x1aab7b[_0x20c190]=_0x4a6b68[_0x20c190]);}}return _0x280e4b(_0x1529be,_0x1db4b5),_0x1529be;},'migrateOldData':function(_0x4113e7){var _0x68943a=_0x26cd58,_0x1db89c=JSON[_0x68943a(0x1f0)](JSON[_0x68943a(0x1dc)](this['defaultData']));if(_0x4113e7[_0x68943a(0x1ee)])_0x1db89c['scriptsFolderPath']=_0x4113e7['scriptsFolderPath'];if(_0x4113e7[_0x68943a(0x1eb)])_0x1db89c[_0x68943a(0x1eb)]=_0x4113e7[_0x68943a(0x1eb)];if(_0x4113e7[_0x68943a(0x1d9)])_0x1db89c[_0x68943a(0x1d9)]=_0x4113e7[_0x68943a(0x1d9)];if(_0x4113e7[_0x68943a(0x1f7)])_0x1db89c[_0x68943a(0x1f7)]=_0x4113e7[_0x68943a(0x1f7)];return _0x1db89c;},'createBackup':function(){var _0x436f12=this;return new Promise(function(_0xd8899f,_0x4202a3){var _0x916811=_0x17dc,_0x11f030=_0x436f12[_0x916811(0x1f6)][_0x916811(0x1fb)]('.json','_backup_'+Date['now']()+_0x916811(0x1e4));csInterface[_0x916811(0x1d8)](_0x916811(0x1f2)+_0x436f12[_0x916811(0x1f6)]+_0x916811(0x1de)+_0x11f030+'\x22)',function(_0x10b15e){var _0x5a10eb=_0x916811;_0x10b15e===_0x5a10eb(0x1f8)?_0xd8899f(_0x11f030):_0x4202a3('备份失败:\x20'+_0x10b15e);});});},'exportData':function(){var _0x24fa52=this;return new Promise(function(_0x594562,_0x2ede18){var _0x327f7d=_0x17dc;_0x24fa52[_0x327f7d(0x1d4)]()[_0x327f7d(0x1e9)](function(_0x5ca0df){var _0x369659=_0x327f7d,_0x34bac5=JSON[_0x369659(0x1f0)](JSON[_0x369659(0x1dc)](_0x5ca0df));delete _0x34bac5[_0x369659(0x1ee)],_0x594562(_0x34bac5);})[_0x327f7d(0x1d1)](_0x2ede18);});},'importData':function(_0x3c69a3){var _0x2abf31=this;return new Promise(function(_0x1b2da1,_0x2c5252){var _0x1d3e19=_0x17dc;try{if(!_0x2abf31[_0x1d3e19(0x1e8)](_0x3c69a3)){_0x2c5252(_0x1d3e19(0x200));return;}_0x2abf31[_0x1d3e19(0x1fc)]()[_0x1d3e19(0x1e9)](function(){var _0x4f1b55=_0x1d3e19;return _0x2abf31[_0x4f1b55(0x1d4)]();})[_0x1d3e19(0x1e9)](function(_0x301788){var _0xc8025=_0x1d3e19,_0x33af85=_0x2abf31[_0xc8025(0x1ea)](_0x3c69a3);return _0x33af85[_0xc8025(0x1ee)]=_0x301788[_0xc8025(0x1ee)],_0x2abf31['saveData'](_0x33af85);})[_0x1d3e19(0x1e9)](function(){_0x1b2da1(!![]);})[_0x1d3e19(0x1d1)](_0x2c5252);}catch(_0x30a128){_0x2c5252(_0x1d3e19(0x1e7)+_0x30a128[_0x1d3e19(0x1fa)]());}});}};typeof module!==_0x26cd58(0x203)&&module['exports']&&(module[_0x26cd58(0x1f4)]=DataManager);